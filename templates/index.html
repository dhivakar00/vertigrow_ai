{% extends "base.html" %}

{% block title %}VertiGrow AI - Plan Your Vertical Farm{% endblock %}

{% block content %}
<div class="container my-5">
    <!-- Hero Section -->
    <div class="row align-items-center mb-5">
        <div class="col-lg-6">
            <h1 class="display-4 text-success mb-3">
                <i class="fas fa-seedling me-3"></i>
                VertiGrow AI
            </h1>
            <p class="lead mb-4">
                Smart planning for urban vertical farming. Get AI-powered crop recommendations, 
                yield predictions, and comprehensive cost analysis for your vertical farm project.
            </p>
            <div class="d-flex flex-wrap gap-3 mb-4">
                <span class="badge bg-success fs-6">
                    <i class="fas fa-brain me-1"></i>AI Recommendations
                </span>
                <span class="badge bg-info fs-6">
                    <i class="fas fa-cloud me-1"></i>Weather Integration
                </span>
                <span class="badge bg-warning fs-6">
                    <i class="fas fa-calculator me-1"></i>ROI Analysis
                </span>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="text-center">
                <i class="fas fa-building text-success" style="font-size: 8rem; opacity: 0.8;"></i>
            </div>
        </div>
    </div>

    <!-- Farm Planning Form -->
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-clipboard-list me-2"></i>
                        Plan Your Vertical Farm
                    </h3>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('create_plan') }}" id="farmPlanForm">
                        <div class="row">
                            <!-- Location -->
                            <div class="col-md-6 mb-3">
                                <label for="location" class="form-label">
                                    <i class="fas fa-map-marker-alt me-1"></i>Location
                                </label>
                                <input type="text" class="form-control" id="location" name="location" 
                                       placeholder="e.g., New York, San Francisco, London" required>
                                <div class="form-text">Enter city name for weather data integration</div>
                            </div>

                            <!-- Area Size -->
                            <div class="col-md-6 mb-3">
                                <label for="area_size" class="form-label">
                                    <i class="fas fa-expand-arrows-alt me-1"></i>Area Size (mÂ²)
                                </label>
                                <input type="number" class="form-control" id="area_size" name="area_size" 
                                       min="1" max="10000" step="0.1" placeholder="50" required>
                                <div class="form-text">Total floor area available for farming</div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Budget -->
                            <div class="col-md-6 mb-3">
                                <label for="budget" class="form-label">
                                    <i class="fas fa-dollar-sign me-1"></i>Budget (USD)
                                </label>
                                <input type="number" class="form-control" id="budget" name="budget" 
                                       min="100" max="1000000" step="100" placeholder="10000" required>
                                <div class="form-text">Initial investment budget</div>
                            </div>

                            <!-- Water Availability -->
                            <div class="col-md-6 mb-3">
                                <label for="water_availability" class="form-label">
                                    <i class="fas fa-tint me-1"></i>Water Availability
                                </label>
                                <select class="form-select" id="water_availability" name="water_availability" required>
                                    <option value="">Select availability</option>
                                    <option value="low">Low - Limited water access</option>
                                    <option value="medium" selected>Medium - Standard city supply</option>
                                    <option value="high">High - Unlimited access</option>
                                </select>
                            </div>
                        </div>

                        <!-- Light Access -->
                        <div class="mb-4">
                            <label for="light_access" class="form-label">
                                <i class="fas fa-lightbulb me-1"></i>Light Access
                            </label>
                            <select class="form-select" id="light_access" name="light_access" required>
                                <option value="">Select light access type</option>
                                <option value="natural">Natural - Windows/skylights only</option>
                                <option value="artificial" selected>Artificial - LED grow lights</option>
                                <option value="hybrid">Hybrid - Natural + LED combination</option>
                            </select>
                            <div class="form-text">Choose based on your facility's lighting setup</div>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="fas fa-magic me-2"></i>
                                Generate AI Farm Plan
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="row mt-5">
        <div class="col-12">
            <h2 class="text-center mb-5">What You'll Get</h2>
        </div>
        
        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card h-100 border-0 bg-dark">
                <div class="card-body text-center">
                    <div class="text-success mb-3">
                        <i class="fas fa-seedling" style="font-size: 2.5rem;"></i>
                    </div>
                    <h5 class="card-title">Crop Recommendations</h5>
                    <p class="card-text text-muted">
                        AI-powered suggestions for the best crops based on your location, 
                        climate, and resources.
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card h-100 border-0 bg-dark">
                <div class="card-body text-center">
                    <div class="text-info mb-3">
                        <i class="fas fa-chart-line" style="font-size: 2.5rem;"></i>
                    </div>
                    <h5 class="card-title">Yield Predictions</h5>
                    <p class="card-text text-muted">
                        Accurate predictions of expected harvest yields and growth times 
                        for optimal planning.
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card h-100 border-0 bg-dark">
                <div class="card-body text-center">
                    <div class="text-warning mb-3">
                        <i class="fas fa-calculator" style="font-size: 2.5rem;"></i>
                    </div>
                    <h5 class="card-title">Cost Analysis</h5>
                    <p class="card-text text-muted">
                        Comprehensive breakdown of setup costs, operational expenses, 
                        and ROI projections.
                    </p>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
            <div class="card h-100 border-0 bg-dark">
                <div class="card-body text-center">
                    <div class="text-danger mb-3">
                        <i class="fas fa-layer-group" style="font-size: 2.5rem;"></i>
                    </div>
                    <h5 class="card-title">Layout Design</h5>
                    <p class="card-text text-muted">
                        Space-optimized layout suggestions with infrastructure 
                        requirements and efficiency metrics.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Form validation and enhancement
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('farmPlanForm');
    const submitButton = form.querySelector('button[type="submit"]');
    
    // Add loading state on form submission
    form.addEventListener('submit', function() {
        submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Generating Plan...';
        submitButton.disabled = true;
    });
    
    // Add input validation feedback
    const inputs = form.querySelectorAll('input[type="number"]');
    inputs.forEach(input => {
        input.addEventListener('input', function() {
            validateNumericInput(this);
        });
    });
    
    function validateNumericInput(input) {
        const value = parseFloat(input.value);
        const min = parseFloat(input.min);
        const max = parseFloat(input.max);
        
        if (isNaN(value) || value < min || value > max) {
            input.classList.add('is-invalid');
        } else {
            input.classList.remove('is-invalid');
            input.classList.add('is-valid');
        }
    }
});
</script>
{% endblock %}
